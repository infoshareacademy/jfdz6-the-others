var mapTable = [
    ["o","-","-","-","-","-","#","#","-","-","-","#","x","#","-","#","-","-","#","x","x","#","-","x","-","#","#","-","x","x"],
    ["#","-","x","#","-","-","#","x","#","-","-","-","-","-","-","-","-","-","-","-","-","-","-","x","#","-","x","#","-","-"],
    ["#","-","#","x","-","-","#","x","#","-","-","#","x","-","-","-","x","-","#","-","#","-","-","#","#","-","-","#","-","#"],
    ["#","-","-","-","-","-","#","x","#","-","-","x","#","-","#","-","-","-","#","#","#","-","-","-","-","x","-","#","-","x"],
    ["x","x","x","-","-","-","#","x","#","-","#","-","-","-","-","-","x","-","-","-","-","-","#","#","-","-","-","-","-","-"],
    ["-","-","-","-","-","-","#","x","#","-","-","-","-","-","-","#","#","-","-","x","-","x","-","-","-","-","#","#","#","-"],
    ["-","-","-","#","#","-","#","#","#","-","-","#","-","#","-","-","-","-","-","-","x","-","#","-","-","-","#","#","-","-"],
    ["#","#","-","x","x","-","-","-","-","-","#","-","-","#","x","x","#","-","-","#","-","-","-","-","x","x","-","#","-","-"],
    ["#","#","-","#","#","-","-","-","#","-","-","x","-","-","-","-","-","-","-","#","x","#","-","#","-","x","-","-","-","#"],
    ["-","-","-","-","-","-","x","-","-","x","x","x","x","x","-","-","#","-","#","-","-","-","#","-","#","-","-","-","-","-"],
    ["x","-","#","-","-","-","-","-","-","#","#","#","#","#","-","#","#","-","-","-","-","-","#","-","#","#","#","-","-","x"],
    ["x","-","#","-","-","#","#","#","-","-","-","-","#","-","-","#","-","-","-","x","-","-","#","-","-","x","#","-","#","-"],
    ["x","-","#","-","-","#","-","-","x","-","#","-","-","-","-","-","-","#","-","-","#","x","-","-","-","#","-","-","-","#"],
    ["x","-","#","-","-","-","-","-","-","-","-","-","-","#","-","x","-","#","-","-","#","-","x","-","-","-","-","#","-","-"],
    ["-","-","-","-","#","#","#","#","-","-","#","x","#","-","x","x","-","#","-","#","-","-","-","-","#","x","#","-","-","#"],
    ["-","-","-","-","#","x","x","#","-","-","-","-","#","-","x","x","-","-","-","-","-","-","x","-","-","-","-","-","-","-"],
    ["-","#","x","-","#","x","x","#","-","-","x","-","-","-","x","-","-","-","x","#","-","-","#","-","-","#","-","#","-","x"],
    ["-","#","x","-","#","#","#","#","-","-","#","-","-","_","x","-","-","#","x","-","-","-","x","#","x","#","-","#","-","#"],
    ["-","#","x","-","-","-","-","-","-","#","#","#","#","-","-","-","-","#","-","-","-","#","x","#","-","#","x","#","-","-"],
    ["-","-","-","-","-","x","x","-","-","x","x","x","x","-","#","-","-","-","-","x","-","-","-","-","-","-","-","-","x","m"]
];
function createTable(width, height) {
    var $table = $('<table>');
    for (var j = 0; j < height; j += 1) {
        $tr = $('<tr>');
        // var row = [];
        for (var i = 0; i < width; i += 1) {
            var col = '-';
            $td = $('<td>');
            if( mapTable[j][i] === '#' ){
            // if( parseInt(Math.random() * (i + j)) % 3 === 0 ){
                // col = '#';
                // $td.css('background', 'gray');
                $td.html('<img src="Assets/Photos/zielonyplot.jpg" style="width: 30px; height: 30px;"/>')
            }else if( mapTable[j][i] === 'x'){
                $td.html('<img src="Assets/Photos/cegla.jpg" style="width: 30px; height: 30px;"/>')

            }else if( mapTable[j][i] === 'o') {
                $td.html('<img src="Assets/Photos/buss.png" style="width: 30px; height: 30px;"/>')

            }else if( mapTable[j][i] === 'm') {
                $td.html('<img src="Assets/Photos/meta.png" style="width: 30px; height: 30px;"/>')
            }
            $tr.append($td);
            // row.push(col);
        }
        // mapTable.push(row);
        $table.append($tr);
    }
    return $table;
}
var $board = $('#board');
var $table = createTable(30, 20);
$('td', $table).addClass('point');

$board.append($table);

$('tr:first td:first', $table).addClass('bus');

$(document).keydown(function(e){
    var $bus = $('.bus');
    //left
    if (e.keyCode === 37) {
        $bus.removeClass('bus').prev().addClass('bus');
    }
    //up
    if (e.keyCode === 38) {
        e.preventDefault();
        $bus.removeClass('bus').parent().prev().find('td').eq($bus.index()).addClass('bus');
    }
    //right
    if (e.keyCode === 39) {
        $('.bus').removeClass('bus').next().addClass('bus');
    }
    //down
    if (e.keyCode === 40) {
        e.preventDefault();
        $('.bus').removeClass('bus').parent().next().find('td').eq($bus.index()).addClass('bus');
    }
})

